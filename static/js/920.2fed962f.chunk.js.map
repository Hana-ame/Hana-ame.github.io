{"version":3,"file":"static/js/920.2fed962f.chunk.js","mappings":"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","sources":["MarkDownParser/App.jsx"],"sourcesContent":["// 25.10.28\n// create\n// 用来渲染野生markdown文件的\n\nimport React, { useState, useEffect } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport remarkBreaks from 'remark-breaks'; // 引入插件\n\nimport { PhotoProvider, PhotoView } from 'react-photo-view';\nimport 'react-photo-view/dist/react-photo-view.css';\n\n\nimport './MarkdownViewer.css';\n\nconst MarkdownViewer = () => {\n  const [markdown, setMarkdown] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [url, setUrl] = useState('');\n\n  useEffect(() => {\n    // 解析URL参数\n    const queryParams = new URLSearchParams(window.location.search);\n    const markdownUrl = queryParams.get('url');\n\n    if (markdownUrl) {\n      setUrl(markdownUrl);\n      fetchMarkdown(markdownUrl);\n    } else {\n      setLoading(false);\n      setError('No URL parameter provided. Use ?url=https://example.com/markdown.md');\n    }\n  }, []);\n\n  useEffect(() => {\n    // 当markdown内容变化时，提取标题并设置页面标题\n    if (markdown) {\n      extractTitleFromMarkdown();\n    }\n  }, [markdown]);\n\n  const extractTitleFromMarkdown = () => {\n    // 查找第一个一级标题\n    const match = markdown.match(/^#\\s+(.+)$/m);\n    if (match && match[1]) {\n      // 设置浏览器标签标题\n      document.title = `${match[1]} - 月桂树`;\n    } else {\n      document.title = 'Markdown Viewer - 月桂树';\n    }\n  };\n\n  const fetchMarkdown = async (url) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(`Failed to fetch Markdown: ${response.status} ${response.statusText}`);\n      }\n\n      const text = await response.text();\n      setMarkdown(text);\n    } catch (err) {\n      // 用proxy重试\n      try {\n        const newUrl = new URL(url)\n        newUrl.searchParams.set('proxy_host', newUrl.host);\n        newUrl.host = 'proxy.moonchan.xyz';\n        const response = await fetch(newUrl)\n        if (!response.ok) {\n          throw new Error(`Failed to fetch Markdown: ${response.status} ${response.statusText}`);\n        }\n\n        const text = await response.text();\n        setMarkdown(text);\n\n      } catch (err) {\n        setError(err.message);\n        console.error('Error fetching Markdown:', err);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const CodeBlock = ({ inline, className, children, ...props }) => {\n    const match = /language-(\\w+)/.exec(className || '');\n\n    return !inline && match ? (\n      <>{String(children).replace(/\\n$/, '')}</>\n    ) : (\n      <code className={className} {...props}>\n        {children}\n      </code>\n    );\n  };\n\n  const handleReload = () => {\n    if (url) {\n      fetchMarkdown(url);\n    }\n  };\n\n  const handleUrlChange = (e) => {\n    setUrl(e.target.value);\n  };\n\n  const handleLoadNewUrl = () => {\n    if (url) {\n      window.location.search = `?url=${encodeURIComponent(url)}`;\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"spinner\"></div>\n        <p>Loading Markdown from {url}...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"error-container\">\n        <h2>Error Loading Markdown</h2>\n        <p>{error}</p>\n        <div className=\"url-controls\">\n          <input\n            type=\"text\"\n            value={url}\n            onChange={handleUrlChange}\n            placeholder=\"Enter Markdown URL\"\n          />\n          <button onClick={handleLoadNewUrl}>Load</button>\n          <button onClick={handleReload}>Retry</button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <main className=\"markdown-viewer\">\n      <PhotoProvider>\n\n        <div className=\"markdown-content\">\n          <ReactMarkdown\n            remarkPlugins={[remarkGfm, remarkBreaks]}  // 使用插件\n            breaks={true}  // 添加这一行\n            components={{\n              code: CodeBlock,\n              a: ({ node, children, href, ...props }) => (\n                <a\n                  href={href}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  {...props}\n                  aria-label={children ? undefined : `Link to ${href}`}\n                >\n                  {children ? children : href}\n                </a>\n              ),\n              img: ({ node, alt, ...props }) => (\n                props.src && <PhotoView src={props.src}>\n                  <img alt={alt || ''} style={{ maxWidth: '100%', maxHeight: '100%', height: 'auto', width: 'auto' }} {...props} />\n                </PhotoView>\n              )\n            }}\n          >\n            {markdown}\n          </ReactMarkdown>\n        </div>\n      </PhotoProvider>\n\n\n      <div className=\"footer\">\n        <p>Rendered with React Markdown Viewer | {new Date().toLocaleDateString()}</p>\n        <p><a href=\"https://moonchan.xyz/\">月岛 - 匿名版</a></p>\n      </div>\n\n    </main>\n  );\n};\n\nexport default MarkdownViewer;"],"names":["MarkdownViewer","markdown","setMarkdown","useState","loading","setLoading","error","setError","url","setUrl","useEffect","markdownUrl","URLSearchParams","window","location","search","get","fetchMarkdown","extractTitleFromMarkdown","match","document","title","async","response","fetch","ok","Error","status","statusText","text","err","newUrl","URL","searchParams","set","host","message","console","handleReload","handleUrlChange","e","target","value","handleLoadNewUrl","encodeURIComponent","_jsxs","className","children","_jsx","type","onChange","placeholder","onClick","PhotoProvider","ReactMarkdown","remarkPlugins","remarkGfm","remarkBreaks","breaks","components","code","_ref","inline","props","exec","_Fragment","String","replace","a","_ref2","node","href","rel","undefined","img","_ref3","alt","src","PhotoView","style","maxWidth","maxHeight","height","width","Date","toLocaleDateString"],"sourceRoot":""}