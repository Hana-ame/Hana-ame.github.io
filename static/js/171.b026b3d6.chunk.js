"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[171],{7114:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(5043);function s(e,t){const[n,s]=(0,o.useState)((()=>{if("undefined"===typeof window)return t;try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(r){return console.error(`Error reading localStorage key \u201c${e}\u201d:`,r),t}})),[r,l]=(0,o.useState)(null),a=(0,o.useCallback)((t=>{try{const o=t instanceof Function?t(n):t;if(s(o),"undefined"!==typeof window){const t=JSON.stringify(o);window.localStorage.setItem(e,t),window.dispatchEvent(new StorageEvent("storage",{key:e,newValue:t}))}}catch(o){const t=o;console.error(`Error setting localStorage key \u201c${e}\u201d:`,t),l(t)}}),[e,n]);return(0,o.useEffect)((()=>{if("undefined"===typeof window)return;const t=t=>{if(console.log(t,t.key===e,t.newValue),t.key===e&&t.newValue)try{s(JSON.parse(t.newValue)),l(null)}catch(n){const t=n;console.error(`Error parsing new value for key \u201c${e}\u201d from storage event:`,t),l(t)}};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}}),[e]),[n,a,r]}},171:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var o=n(5043),s=n(579);const r=e=>{let{onSubmit:t=e=>{console.log("Submitted URL: "+e)}}=e;const[n,r]=(0,o.useState)(""),l=()=>{n.trim()&&(t(n.trim()),r(""))};return(0,s.jsxs)("div",{className:"flex p-2.5",children:[" ",(0,s.jsx)("input",{type:"text",value:n,onChange:e=>{r(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&l()},placeholder:"Type your message or URL...",className:"flex-grow mr-2 p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,s.jsx)("button",{onClick:l,className:"px-4 py-2 bg-blue-500 text-white font-medium rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",children:"Submit"})]})};function l(e){let{items:t,onItemClick:n,onDeleteItem:o}=e;return(0,s.jsxs)("ul",{className:"space-y-3",children:[" ",t.map(((e,t)=>(0,s.jsxs)("li",{className:"flex justify-between items-center p-4 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 cursor-default",children:[(0,s.jsx)("span",{className:"flex-1 cursor-pointer text-gray-800 hover:text-blue-600 transition-colors duration-150",onClick:()=>null===n||void 0===n?void 0:n(e),children:e}),(0,s.jsx)("button",{className:"ml-4 bg-red-500 hover:bg-red-700 text-white font-semibold py-1 px-3 rounded-md transition-colors duration-150",onClick:()=>null===o||void 0===o?void 0:o(t),"aria-label":"\u5220\u9664\u9879\u76ee",children:"\xd7"})]},t)))]})}function a(e){let{mode:t,setMode:n}=e;return(0,s.jsxs)("nav",{className:"flex w-full bg-gray-100 rounded-lg overflow-hidden shadow-sm",children:[(0,s.jsx)("button",{className:"flex-1 py-3 px-4 text-sm font-medium transition-colors duration-200 "+("mouse-pad"===t?"bg-blue-500 text-white shadow-inner":"bg-white text-gray-600 hover:bg-gray-50"),onClick:()=>n("mouse-pad"),children:"Mouse Pad"}),(0,s.jsx)("button",{className:"flex-1 py-3 px-4 text-sm font-medium transition-colors duration-200 "+("keyboard"===t?"bg-blue-500 text-white shadow-inner":"bg-white text-gray-600 hover:bg-gray-50"),onClick:()=>n("keyboard"),children:"Keyboard"}),(0,s.jsx)("button",{className:"flex-1 py-3 px-4 text-sm font-medium transition-colors duration-200 "+("text-area"===t?"bg-blue-500 text-white shadow-inner":"bg-white text-gray-600 hover:bg-gray-50"),onClick:()=>n("text-area"),children:"Text Area"})]})}function i(e){let{onMouseDown:t,onMouseUp:n}=e;const r=(0,o.useRef)(null);(0,o.useEffect)((()=>{const e=r.current;if(!e)return;const t=e.getContext("2d");return t?(t.save(),t.translate(0,e.height),t.scale(1,-1),()=>{t.restore()}):void 0}),[]);const l=e=>{e.preventDefault(),t&&t("left")},a=e=>{e.preventDefault(),n&&n("left")};return(0,s.jsx)("div",{className:"flex justify-center items-center h-screen bg-gray-100 p-4",children:(0,s.jsx)("canvas",{ref:r,width:"100%",height:"100%",className:"bg-white rounded-lg shadow-md border border-gray-200",onMouseDown:l,onMouseUp:a,onTouchStart:l,onTouchEnd:a,style:{touchAction:"none"}})})}const c=e=>{let{value:t,onClick:n,className:o=""}=e;return(0,s.jsx)("button",{onClick:n,className:`\n        flex items-center justify-center \n        bg-white text-gray-800 font-medium\n        border border-gray-300 \n        rounded-lg \n        shadow-sm \n        hover:bg-gray-50 \n        active:bg-gray-200 \n        active:scale-95\n        focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 \n        transition-all duration-150 \n        select-none\n        touch-manipulation\n        ${o}\n      `,"aria-label":`\u6309\u952e ${t}`,children:t})},u=e=>{let{onKeyPress:t}=e;const[n,r]=(0,o.useState)(!1),[l,a]=(0,o.useState)(!1),i=[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["z","x","c","v","b","n","m"],[" "]],u=["!","@","#","$","%","^","&","*","(",")"],d=["-","_","+","=","{","}","[","]",":",'"'],m=["|","\\",";","'","<",">",",",".","?","/"],f="\u21e7",g="\u232b",v="\u21a9",x="\u2606#&",h=e=>{if("shift"===e)return void r((e=>!e));if("symbols"===e)return void a((e=>!e));let o=e;n&&1===e.length&&e.match(/[a-z]/)&&(o=e.toUpperCase(),r(!1)),t&&t(o)},b=()=>{t&&t("backspace")},w=()=>{t&&t("enter")};return(0,s.jsx)("div",{className:"w-full max-w-md mx-auto bg-gray-100 rounded-xl shadow-lg p-3 safe-area-padding",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex justify-center space-x-1",children:u.map(((e,t)=>(0,s.jsx)(c,{value:e,onClick:()=>h(e),className:"w-8 h-10 text-sm bg-yellow-100 hover:bg-yellow-200"},t)))}),(0,s.jsx)("div",{className:"flex justify-center space-x-1",children:d.map(((e,t)=>(0,s.jsx)(c,{value:e,onClick:()=>h(e),className:"w-8 h-10 text-sm bg-yellow-100 hover:bg-yellow-200"},t)))}),(0,s.jsxs)("div",{className:"flex justify-center space-x-1",children:[m.map(((e,t)=>(0,s.jsx)(c,{value:e,onClick:()=>h(e),className:"w-8 h-10 text-sm bg-yellow-100 hover:bg-yellow-200"},t))),(0,s.jsx)(c,{value:"\u2190",onClick:()=>a(!1),className:"w-10 h-10 text-sm bg-red-100 hover:bg-red-200"})]})]}):null,l?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex justify-center space-x-1",children:[i[0].map(((e,t)=>(0,s.jsx)(c,{value:e,onClick:()=>h(e),className:"w-8 h-10 text-sm"},t))),(0,s.jsx)(c,{value:g,onClick:b,className:"w-12 h-10 text-sm bg-red-100 hover:bg-red-200"})]}),(0,s.jsx)("div",{className:"flex justify-center space-x-1",children:i[1].map(((e,t)=>(0,s.jsx)(c,{value:e,onClick:()=>h(e),className:"w-8 h-10 text-sm"},t)))}),(0,s.jsxs)("div",{className:"flex justify-center space-x-1",children:[(0,s.jsx)(c,{value:f,onClick:()=>h("shift"),className:"w-10 h-10 text-sm "+(n?"bg-blue-200":"bg-gray-200")}),i[2].map(((e,t)=>(0,s.jsx)(c,{value:e,onClick:()=>h(e),className:"w-8 h-10 text-sm"},t))),(0,s.jsx)(c,{value:v,onClick:w,className:"w-10 h-10 text-sm bg-green-100 hover:bg-green-200"})]}),(0,s.jsxs)("div",{className:"flex justify-center space-x-1",children:[(0,s.jsx)(c,{value:x,onClick:()=>h("symbols"),className:"w-10 h-10 text-sm bg-purple-100 hover:bg-purple-200"}),i[3].map(((e,t)=>(0,s.jsx)(c,{value:e,onClick:()=>h(e),className:"w-8 h-10 text-sm"},t))),(0,s.jsx)(c,{value:x,onClick:()=>h("symbols"),className:"w-10 h-10 text-sm bg-purple-100 hover:bg-purple-200"})]}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(c,{value:"\u7a7a\u683c",onClick:()=>h(" "),className:"w-64 h-10 text-sm"})})]})]})})};function d(e){let{onSubmit:t}=e;const[n,r]=(0,o.useState)("");return(0,s.jsxs)("div",{className:"p-4 space-y-3 bg-white rounded-lg shadow-sm",children:[" ",(0,s.jsx)("textarea",{className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:n,onChange:e=>r(e.target.value),rows:4,placeholder:"\u8bf7\u8f93\u5165\u6587\u672c..."}),(0,s.jsx)("button",{className:"w-full px-4 py-2 bg-blue-500 text-white font-medium rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{t(n),r("")},disabled:!n.trim(),children:"Submit"})]})}let m;function f(e,t,n){if(m&&(m.readyState===WebSocket.OPEN||m.readyState===WebSocket.CONNECTING))return void(null===t||void 0===t||t("WebSocket is already open or connecting."));m=new WebSocket(e),m.onopen=()=>{null===t||void 0===t||t("WebSocket connection established.")},m.onmessage=e=>{null===t||void 0===t||t("Message from server:",e.data)},m.onclose=e=>{null===t||void 0===t||t("WebSocket connection closed:",e.code,e.reason),null===n||void 0===n||n()},m.onerror=e=>{null===t||void 0===t||t("WebSocket error:",e)};const o=e=>{},s=e=>{const t={alpha:e.alpha,beta:e.beta,gamma:e.gamma};m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify(t))};return"undefined"!==typeof DeviceMotionEvent&&"function"===typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then((e=>{"granted"===e?(window.addEventListener("devicemotion",o,!0),null===t||void 0===t||t("\u52a0\u901f\u5ea6\u8ba1\u6743\u9650\u5df2\u6388\u4e88\u3002")):null===t||void 0===t||t("\u52a0\u901f\u5ea6\u8ba1\u6743\u9650\u88ab\u62d2\u7edd\u3002")})).catch((e=>{null===t||void 0===t||t("\u8bf7\u6c42\u52a0\u901f\u5ea6\u8ba1\u6743\u9650\u65f6\u51fa\u9519: "+e),null===t||void 0===t||t("DeviceMotionEvent Error:",e)})):window.DeviceMotionEvent?(window.addEventListener("devicemotion",o,!0),null===t||void 0===t||t("\u5c1d\u8bd5\u76d1\u542c\u52a0\u901f\u5ea6\u8ba1... (\u975eiOS13+\u6216\u5b89\u5353)")):null===t||void 0===t||t("\u6b64\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u52a0\u901f\u5ea6\u8ba1\u4e8b\u4ef6\u3002"),"undefined"!==typeof DeviceOrientationEvent&&"function"===typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((e=>{"granted"===e?(window.addEventListener("deviceorientation",s,!0),null===t||void 0===t||t("\u9640\u87ba\u4eea\u6743\u9650\u5df2\u6388\u4e88\u3002")):null===t||void 0===t||t("\u9640\u87ba\u4eea\u6743\u9650\u88ab\u62d2\u7edd\u3002")})).catch((e=>{null===t||void 0===t||t("\u8bf7\u6c42\u9640\u87ba\u4eea\u6743\u9650\u65f6\u51fa\u9519: "+e),null===t||void 0===t||t("DeviceOrientationEvent Error:",e)})):window.DeviceOrientationEvent?(window.addEventListener("deviceorientation",s,!0),null===t||void 0===t||t(" \u5c1d\u8bd5\u76d1\u542c\u9640\u87ba\u4eea... (\u975eiOS13+\u6216\u5b89\u5353)")):null===t||void 0===t||t(" \u6b64\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u9640\u87ba\u4eea\u4e8b\u4ef6\u3002"),[function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left click";m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify({mouse:e}))},function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify({text:e}))},function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Enter";m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify({keydown:e}))},function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Enter";m&&m.readyState===WebSocket.OPEN&&m.send(JSON.stringify({keyup:e}))},m]}function g(e){let{url:t=""}=e;const[n,r]=(0,o.useState)(""),[l,c,m,g,v]=f(t);(0,o.useEffect)((()=>v.close()));return""===t?(0,s.jsx)("div",{children:"please set url"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a,{mode:n,setMode:r}),"mouse-pad"===n&&(0,s.jsx)(i,{onMouseDown:e=>l(e)}),"keyboard"===n&&(0,s.jsx)(u,{onKeyPress:e=>{m(e),g(e)}}),"text-area"===n&&(0,s.jsx)(d,{onSubmit:c})]})}var v=n(7114);function x(){const[e,t]=(0,o.useState)(""),[n,a]=(0,v.A)("kuuki-mouse",["ws://127.0.0.1:8765"]);return""!==e?(0,s.jsx)("main",{children:(0,s.jsx)(g,{url:e})}):(0,s.jsxs)("main",{children:[(0,s.jsx)(r,{onSubmit:e=>{a((t=>[...t,e]))}}),(0,s.jsx)(l,{items:n,onItemClick:e=>{t(e)},onDeleteItem:e=>{a((t=>t.filter(((t,n)=>n!==e))))}})]})}}}]);
//# sourceMappingURL=171.b026b3d6.chunk.js.map