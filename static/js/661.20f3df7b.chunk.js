"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[661],{3661:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var r=n(5043),a=n(8494),s=n(7274),o=n(3596),c=n(579);const l=()=>{const[e,t]=(0,r.useState)(""),[n,l]=(0,r.useState)(!0),[i,d]=(0,r.useState)(null),[h,m]=(0,r.useState)("");(0,r.useEffect)((()=>{const e=new URLSearchParams(window.location.search).get("url");e?(m(e),w(e)):(l(!1),d("No URL parameter provided. Use ?url=https://example.com/markdown.md"))}),[]),(0,r.useEffect)((()=>{e&&u()}),[e]);const u=()=>{const t=e.match(/^#\s+(.+)$/m);t&&t[1]?document.title=`${t[1]} - \u6708\u6842\u6811`:document.title="Markdown Viewer - \u6708\u6842\u6811"},w=async e=>{try{l(!0),d(null);const n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch Markdown: ${n.status} ${n.statusText}`);const r=await n.text();t(r)}catch(n){try{const n=new URL(e);n.searchParams.set("proxy_host",n.host),n.host="proxy.moonchan.xyz";const r=await fetch(n);if(!r.ok)throw new Error(`Failed to fetch Markdown: ${r.status} ${r.statusText}`);const a=await r.text();t(a)}catch(n){d(n.message),console.error("Error fetching Markdown:",n)}}finally{l(!1)}},x=()=>{h&&w(h)},p=e=>{m(e.target.value)},k=()=>{h&&(window.location.search=`?url=${encodeURIComponent(h)}`)};return n?(0,c.jsxs)("div",{className:"loading-container",children:[(0,c.jsx)("div",{className:"spinner"}),(0,c.jsxs)("p",{children:["Loading Markdown from ",h,"..."]})]}):i?(0,c.jsxs)("div",{className:"error-container",children:[(0,c.jsx)("h2",{children:"Error Loading Markdown"}),(0,c.jsx)("p",{children:i}),(0,c.jsxs)("div",{className:"url-controls",children:[(0,c.jsx)("input",{type:"text",value:h,onChange:p,placeholder:"Enter Markdown URL"}),(0,c.jsx)("button",{onClick:k,children:"Load"}),(0,c.jsx)("button",{onClick:x,children:"Retry"})]})]}):(0,c.jsxs)("main",{className:"markdown-viewer",children:[(0,c.jsx)("div",{className:"markdown-content",children:(0,c.jsx)(a.oz,{remarkPlugins:[s.A,o.A],breaks:!0,components:{code:e=>{let{inline:t,className:n,children:r,...a}=e;const s=/language-(\w+)/.exec(n||"");return!t&&s?(0,c.jsx)(c.Fragment,{children:String(r).replace(/\n$/,"")}):(0,c.jsx)("code",{className:n,...a,children:r})},a:e=>{let{node:t,children:n,href:r,...a}=e;return(0,c.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",...a,"aria-label":n?void 0:`Link to ${r}`,children:n||r})},img:e=>{let{node:t,alt:n,...r}=e;return(0,c.jsx)("img",{alt:n||"",style:{maxWidth:"100%"},...r})}},children:e})}),(0,c.jsxs)("div",{className:"footer",children:[(0,c.jsxs)("p",{children:["Rendered with React Markdown Viewer | ",(new Date).toLocaleDateString()]}),(0,c.jsx)("p",{children:(0,c.jsx)("a",{href:"https://moonchan.xyz/",children:"\u6708\u5c9b - \u533f\u540d\u7248"})})]})]})}}}]);
//# sourceMappingURL=661.20f3df7b.chunk.js.map