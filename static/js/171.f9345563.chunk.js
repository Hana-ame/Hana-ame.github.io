"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[171],{7114:(e,n,t)=>{t.d(n,{A:()=>s});var o=t(5043);function s(e,n){const[t,s]=(0,o.useState)((()=>{if("undefined"===typeof window)return n;try{const t=window.localStorage.getItem(e);return t?JSON.parse(t):n}catch(r){return console.error(`Error reading localStorage key \u201c${e}\u201d:`,r),n}})),[r,l]=(0,o.useState)(null),i=(0,o.useCallback)((n=>{try{const o=n instanceof Function?n(t):n;if(s(o),"undefined"!==typeof window){const n=JSON.stringify(o);window.localStorage.setItem(e,n),window.dispatchEvent(new StorageEvent("storage",{key:e,newValue:n}))}}catch(o){const n=o;console.error(`Error setting localStorage key \u201c${e}\u201d:`,n),l(n)}}),[e,t]);return(0,o.useEffect)((()=>{if("undefined"===typeof window)return;const n=n=>{if(console.log(n,n.key===e,n.newValue),n.key===e&&n.newValue)try{s(JSON.parse(n.newValue)),l(null)}catch(t){const n=t;console.error(`Error parsing new value for key \u201c${e}\u201d from storage event:`,n),l(n)}};return window.addEventListener("storage",n),()=>{window.removeEventListener("storage",n)}}),[e]),[t,i,r]}},171:(e,n,t)=>{t.r(n),t.d(n,{default:()=>g});var o=t(5043),s=t(579);const r=e=>{let{onSubmit:n=e=>{console.log("Submitted URL: "+e)}}=e;const[t,r]=(0,o.useState)(""),l=()=>{t.trim()&&(n(t.trim()),r(""))};return(0,s.jsxs)("div",{className:"flex p-2.5",children:[" ",(0,s.jsx)("input",{type:"text",value:t,onChange:e=>{r(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&l()},placeholder:"Type your message or URL...",className:"flex-grow mr-2 p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,s.jsx)("button",{onClick:l,className:"px-4 py-2 bg-blue-500 text-white font-medium rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",children:"Submit"})]})};function l(e){let{items:n,onItemClick:t,onDeleteItem:o}=e;return(0,s.jsxs)("ul",{className:"space-y-3",children:[" ",n.map(((e,n)=>(0,s.jsxs)("li",{className:"flex justify-between items-center p-4 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 cursor-default",children:[(0,s.jsx)("span",{className:"flex-1 cursor-pointer text-gray-800 hover:text-blue-600 transition-colors duration-150",onClick:()=>null===t||void 0===t?void 0:t(e),children:e}),(0,s.jsx)("button",{className:"ml-4 bg-red-500 hover:bg-red-700 text-white font-semibold py-1 px-3 rounded-md transition-colors duration-150",onClick:()=>null===o||void 0===o?void 0:o(n),"aria-label":"\u5220\u9664\u9879\u76ee",children:"\xd7"})]},n)))]})}function i(e){let{mode:n,setMode:t}=e;return(0,s.jsxs)("nav",{className:"flex w-full bg-gray-100 rounded-lg overflow-hidden shadow-sm",children:[(0,s.jsx)("button",{className:"flex-1 py-3 px-4 text-sm font-medium transition-colors duration-200 "+("mouse-pad"===n?"bg-blue-500 text-white shadow-inner":"bg-white text-gray-600 hover:bg-gray-50"),onClick:()=>t("mouse-pad"),children:"Mouse Pad"}),(0,s.jsx)("button",{className:"flex-1 py-3 px-4 text-sm font-medium transition-colors duration-200 "+("keyboard"===n?"bg-blue-500 text-white shadow-inner":"bg-white text-gray-600 hover:bg-gray-50"),onClick:()=>t("keyboard"),children:"Keyboard"}),(0,s.jsx)("button",{className:"flex-1 py-3 px-4 text-sm font-medium transition-colors duration-200 "+("text-area"===n?"bg-blue-500 text-white shadow-inner":"bg-white text-gray-600 hover:bg-gray-50"),onClick:()=>t("text-area"),children:"Text Area"})]})}function a(e){let{onMouseDown:n,onMouseUp:t}=e;const r=(0,o.useRef)(null);(0,o.useEffect)((()=>{const e=r.current;if(!e)return;const n=e.getContext("2d");return n?(n.save(),n.translate(0,e.height),n.scale(1,-1),()=>{n.restore()}):void 0}),[]);const l=e=>{e.preventDefault(),n&&n("left")},i=e=>{e.preventDefault(),t&&t("left")};return(0,s.jsx)("div",{className:"flex justify-center items-center h-screen bg-gray-100 p-4",children:(0,s.jsx)("canvas",{ref:r,width:"680",height:"720",className:"bg-white rounded-lg shadow-md border border-gray-200",onMouseDown:l,onMouseUp:i,onTouchStart:l,onTouchEnd:i,style:{touchAction:"none"}})})}const c=e=>{let{value:n,onClick:t,className:o=""}=e;return(0,s.jsx)("button",{onClick:t,className:`\n        flex items-center justify-center \n        bg-white text-gray-800 font-medium\n        border border-gray-300 \n        rounded-lg \n        shadow-sm \n        hover:bg-gray-50 \n        active:bg-gray-200 \n        active:scale-95\n        focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 \n        transition-all duration-150 \n        select-none\n        touch-manipulation\n        ${o}\n      `,"aria-label":`\u6309\u952e ${n}`,children:n})},u=e=>{let{onKeyPress:n}=e;const[t,r]=(0,o.useState)(!1),[l,i]=(0,o.useState)(!1),a=[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["z","x","c","v","b","n","m"],[" "]],u=["!","@","#","$","%","^","&","*","(",")"],d=["-","_","+","=","{","}","[","]",":",'"'],m=["|","\\",";","'","<",">",",",".","?","/"],v="\u21e7",g="\u232b",f="\u21a9",x="\u2606#&",h=e=>{if("shift"===e)return void r((e=>!e));if("symbols"===e)return void i((e=>!e));let o=e;t&&1===e.length&&e.match(/[a-z]/)&&(o=e.toUpperCase(),r(!1)),n&&n(o)},b=()=>{n&&n("backspace")},y=()=>{n&&n("enter")};return(0,s.jsx)("div",{className:"w-full max-w-md mx-auto bg-gray-100 rounded-xl shadow-lg p-3 safe-area-padding",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex justify-center space-x-1",children:u.map(((e,n)=>(0,s.jsx)(c,{value:e,onClick:()=>h(e),className:"w-8 h-10 text-sm bg-yellow-100 hover:bg-yellow-200"},n)))}),(0,s.jsx)("div",{className:"flex justify-center space-x-1",children:d.map(((e,n)=>(0,s.jsx)(c,{value:e,onClick:()=>h(e),className:"w-8 h-10 text-sm bg-yellow-100 hover:bg-yellow-200"},n)))}),(0,s.jsxs)("div",{className:"flex justify-center space-x-1",children:[m.map(((e,n)=>(0,s.jsx)(c,{value:e,onClick:()=>h(e),className:"w-8 h-10 text-sm bg-yellow-100 hover:bg-yellow-200"},n))),(0,s.jsx)(c,{value:"\u2190",onClick:()=>i(!1),className:"w-10 h-10 text-sm bg-red-100 hover:bg-red-200"})]})]}):null,l?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex justify-center space-x-1",children:[a[0].map(((e,n)=>(0,s.jsx)(c,{value:e,onClick:()=>h(e),className:"w-8 h-10 text-sm"},n))),(0,s.jsx)(c,{value:g,onClick:b,className:"w-12 h-10 text-sm bg-red-100 hover:bg-red-200"})]}),(0,s.jsx)("div",{className:"flex justify-center space-x-1",children:a[1].map(((e,n)=>(0,s.jsx)(c,{value:e,onClick:()=>h(e),className:"w-8 h-10 text-sm"},n)))}),(0,s.jsxs)("div",{className:"flex justify-center space-x-1",children:[(0,s.jsx)(c,{value:v,onClick:()=>h("shift"),className:"w-10 h-10 text-sm "+(t?"bg-blue-200":"bg-gray-200")}),a[2].map(((e,n)=>(0,s.jsx)(c,{value:e,onClick:()=>h(e),className:"w-8 h-10 text-sm"},n))),(0,s.jsx)(c,{value:f,onClick:y,className:"w-10 h-10 text-sm bg-green-100 hover:bg-green-200"})]}),(0,s.jsxs)("div",{className:"flex justify-center space-x-1",children:[(0,s.jsx)(c,{value:x,onClick:()=>h("symbols"),className:"w-10 h-10 text-sm bg-purple-100 hover:bg-purple-200"}),a[3].map(((e,n)=>(0,s.jsx)(c,{value:e,onClick:()=>h(e),className:"w-8 h-10 text-sm"},n))),(0,s.jsx)(c,{value:x,onClick:()=>h("symbols"),className:"w-10 h-10 text-sm bg-purple-100 hover:bg-purple-200"})]}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(c,{value:"\u7a7a\u683c",onClick:()=>h(" "),className:"w-64 h-10 text-sm"})})]})]})})};function d(e){let{onSubmit:n}=e;const[t,r]=(0,o.useState)("");return(0,s.jsxs)("div",{className:"p-4 space-y-3 bg-white rounded-lg shadow-sm",children:[" ",(0,s.jsx)("textarea",{className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t,onChange:e=>r(e.target.value),rows:4,placeholder:"\u8bf7\u8f93\u5165\u6587\u672c..."}),(0,s.jsx)("button",{className:"w-full px-4 py-2 bg-blue-500 text-white font-medium rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{null===n||void 0===n||n(t),r("")},disabled:!t.trim(),children:"Submit"})]})}function m(e){var n,t;let{url:r=""}=e;const[l,c]=(0,o.useState)(""),m=(0,o.useRef)(null),v=(0,o.useRef)(null);(0,o.useEffect)((()=>{if(r){const{onMouse:e,onText:n,onKeyDown:t,onKeyUp:o,socket:s}=function(e,n,t){let o;if(!o||o.readyState!==WebSocket.OPEN&&o.readyState!==WebSocket.CONNECTING)try{o=new WebSocket(e),o.onopen=()=>{null===n||void 0===n||n("WebSocket connection established.")},o.onmessage=e=>{null===n||void 0===n||n("Message from server:",e.data)},o.onclose=e=>{null===n||void 0===n||n("WebSocket connection closed:",e.code,e.reason),null===t||void 0===t||t()},o.onerror=e=>{null===n||void 0===n||n("WebSocket error:",e)};const r=e=>{},l=e=>{const n={alpha:e.alpha,beta:e.beta,gamma:e.gamma};o&&o.readyState===WebSocket.OPEN&&o.send(JSON.stringify(n))};function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left click";null===n||void 0===n||n("Mouse action: "+e),o&&o.readyState===WebSocket.OPEN&&o.send(JSON.stringify({mouse:e}))}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";null===n||void 0===n||n("Sending text: "+e),o&&o.readyState===WebSocket.OPEN&&o.send(JSON.stringify({text:e}))}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Enter";null===n||void 0===n||n("Key down: "+e),console.log(o),console.log(o.readyState),console.log(WebSocket.OPEN),o&&o.readyState===WebSocket.OPEN&&o.send(JSON.stringify({keydown:e}))}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Enter";null===n||void 0===n||n("Key up: "+e),o&&o.readyState===WebSocket.OPEN&&o.send(JSON.stringify({keyup:e}))}return"undefined"!==typeof DeviceMotionEvent&&"function"===typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then((e=>{"granted"===e?(window.addEventListener("devicemotion",r,!0),null===n||void 0===n||n("\u52a0\u901f\u5ea6\u8ba1\u6743\u9650\u5df2\u6388\u4e88\u3002")):null===n||void 0===n||n("\u52a0\u901f\u5ea6\u8ba1\u6743\u9650\u88ab\u62d2\u7edd\u3002")})).catch((e=>{null===n||void 0===n||n("\u8bf7\u6c42\u52a0\u901f\u5ea6\u8ba1\u6743\u9650\u65f6\u51fa\u9519: "+e),null===n||void 0===n||n("DeviceMotionEvent Error:",e)})):window.DeviceMotionEvent?(window.addEventListener("devicemotion",r,!0),null===n||void 0===n||n("\u5c1d\u8bd5\u76d1\u542c\u52a0\u901f\u5ea6\u8ba1... (\u975eiOS13+\u6216\u5b89\u5353)")):null===n||void 0===n||n("\u6b64\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u52a0\u901f\u5ea6\u8ba1\u4e8b\u4ef6\u3002"),"undefined"!==typeof DeviceOrientationEvent&&"function"===typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((e=>{"granted"===e?(window.addEventListener("deviceorientation",l,!0),null===n||void 0===n||n("\u9640\u87ba\u4eea\u6743\u9650\u5df2\u6388\u4e88\u3002")):null===n||void 0===n||n("\u9640\u87ba\u4eea\u6743\u9650\u88ab\u62d2\u7edd\u3002")})).catch((e=>{null===n||void 0===n||n("\u8bf7\u6c42\u9640\u87ba\u4eea\u6743\u9650\u65f6\u51fa\u9519: "+e),null===n||void 0===n||n("DeviceOrientationEvent Error:",e)})):window.DeviceOrientationEvent?(window.addEventListener("deviceorientation",l,!0),null===n||void 0===n||n(" \u5c1d\u8bd5\u76d1\u542c\u9640\u87ba\u4eea... (\u975eiOS13+\u6216\u5b89\u5353)")):null===n||void 0===n||n(" \u6b64\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u9640\u87ba\u4eea\u4e8b\u4ef6\u3002"),{onMouse:i,onText:a,onKeyDown:c,onKeyUp:u,socket:o}}catch(s){null===n||void 0===n||n("WebSocket error: "+s.message)}else null===n||void 0===n||n("WebSocket is already open or connecting.")}(r,(e=>{console.log(e)}),(()=>{}));m.current=s,v.current={onMouse:e,onText:n,onKeyDown:t,onKeyUp:o}}return()=>{m.current&&m.current.close()}}),[r]);return""===r?(0,s.jsx)("div",{children:"please set url"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i,{mode:l,setMode:c}),"mouse-pad"===l&&(0,s.jsx)(a,{onMouseDown:null===(n=v.current)||void 0===n?void 0:n.onMouse}),"keyboard"===l&&(0,s.jsx)(u,{onKeyPress:e=>{var n,t;null===(n=v.current)||void 0===n||n.onKeyDown(e),null===(t=v.current)||void 0===t||t.onKeyUp(e)}}),"text-area"===l&&(0,s.jsx)(d,{onSubmit:null===(t=v.current)||void 0===t?void 0:t.onText})]})}var v=t(7114);function g(){const[e,n]=(0,o.useState)(""),[t,i]=(0,v.A)("kuuki-mouse",["ws://127.0.0.1:8765"]);return""!==e?(0,s.jsx)("main",{children:(0,s.jsx)(m,{url:e})}):(0,s.jsxs)("main",{children:[(0,s.jsx)(r,{onSubmit:e=>{i((n=>[...n,e]))}}),(0,s.jsx)(l,{items:t,onItemClick:e=>{n(e)},onDeleteItem:e=>{i((n=>n.filter(((n,t)=>t!==e))))}})]})}}}]);
//# sourceMappingURL=171.f9345563.chunk.js.map